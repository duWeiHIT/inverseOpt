# é¡¹ç›®ç»“æ„è¯´æ˜

## å®Œæ•´é¡¹ç›®æ ‘

```
Opt/
â”‚
â”œâ”€â”€ ğŸ“„ æºä»£ç æ–‡ä»¶ (src/)
â”‚   â”œâ”€â”€ singleLayerInverse.cpp      # å•å±‚ææ–™åæ¼”ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ multiLayerInverse.cpp       # å¤šå±‚ææ–™åæ¼”ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ dataGen.cpp                 # æ•°æ®ç”Ÿæˆå·¥å…·
â”‚   â”œâ”€â”€ singleLayerSolver.h         # å•å±‚æ±‚è§£å™¨ (ä¸€ç»´éç¨³æ€å¯¼çƒ­)
â”‚   â”œâ”€â”€ multiLayerSolver.h          # å¤šå±‚æ±‚è§£å™¨
â”‚   â”œâ”€â”€ inverseAlgorithm.h          # åæ¼”ç®—æ³• (GA, PSO, CMA-ES, Ceres)
â”‚   â””â”€â”€ heatTransferSolverBase.h    # åŸºç±»å’Œé€šç”¨å®šä¹‰
â”‚
â”œâ”€â”€ ğŸ”¨ æ„å»ºç³»ç»Ÿæ–‡ä»¶
â”‚   â”œâ”€â”€ CMakeLists.txt              # CMakeä¸»é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ Makefile                    # ä¼ ç»ŸMakefile (å¤‡é€‰)
â”‚   â”œâ”€â”€ build.sh                    # MSYS2 Bashæ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ cmake_config.sh             # é«˜çº§CMakeé…ç½®è„šæœ¬
â”‚   â””â”€â”€ check_dependencies.sh       # ä¾èµ–æ£€æŸ¥è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“š æ–‡æ¡£æ–‡ä»¶
â”‚   â”œâ”€â”€ README.md                   # é¡¹ç›®æ¦‚è¿°å’Œè¯¦ç»†è¯´æ˜
â”‚   â”œâ”€â”€ QUICKSTART.md               # å¿«é€Ÿå¼€å§‹æŒ‡å— (5åˆ†é’Ÿ)
â”‚   â”œâ”€â”€ INSTALL.md                  # å®Œæ•´å®‰è£…æŒ‡å—
â”‚   â”œâ”€â”€ PROJECT_STRUCTURE.md        # æœ¬æ–‡ä»¶
â”‚   â””â”€â”€ .gitignore                  # Gitå¿½ç•¥æ–‡ä»¶
â”‚
â””â”€â”€ ğŸ“ build/ (ç¼–è¯‘åç”Ÿæˆ)
    â”œâ”€â”€ bin/                        # å¯æ‰§è¡Œç¨‹åº
    â”‚   â”œâ”€â”€ singleLayerInverse
    â”‚   â”œâ”€â”€ multiLayerInverse
    â”‚   â””â”€â”€ dataGen
    â”œâ”€â”€ lib/                        # åº“æ–‡ä»¶
    â”œâ”€â”€ CMakeFiles/                 # CMakeä¸´æ—¶æ–‡ä»¶
    â”œâ”€â”€ CMakeCache.txt
    â”œâ”€â”€ cmake_install.cmake
    â””â”€â”€ Makefile
```

## æ–‡ä»¶è¯´æ˜

### æºä»£ç æ–‡ä»¶

#### singleLayerInverse.cpp
- **åŠŸèƒ½**: å•å±‚ææ–™çƒ­ç‰©æ€§åæ¼”ç¨‹åº
- **è¾“å…¥**: æ¸©åº¦æµ‹é‡æ•°æ®ã€è¾¹ç•Œæ¡ä»¶ã€ææ–™å‚æ•°åˆå€¼
- **è¾“å‡º**: åæ¼”å¾—åˆ°çš„çƒ­å¯¼ç‡å’Œæ¯”çƒ­
- **ç®—æ³•**: æ”¯æŒGAã€PSOã€CMA-ESã€Ceresç­‰å¤šç§ä¼˜åŒ–ç®—æ³•

#### multiLayerInverse.cpp
- **åŠŸèƒ½**: å¤šå±‚ææ–™çƒ­ç‰©æ€§åæ¼”ç¨‹åº
- **ç‰¹ç‚¹**: æ”¯æŒå¤šå±‚å¤åˆææ–™
- **åº”ç”¨**: å¤åˆææ–™ã€æ¶‚å±‚ç­‰å¤šå±‚ç»“æ„

#### dataGen.cpp
- **åŠŸèƒ½**: ç”Ÿæˆåˆæˆæµ‹è¯•æ•°æ®
- **ç”¨é€”**: éªŒè¯åæ¼”ç®—æ³•çš„å‡†ç¡®æ€§
- **è¾“å‡º**: æ¨¡æ‹Ÿçš„æ¸©åº¦æµ‹é‡æ•°æ®

### å¤´æ–‡ä»¶

#### heatTransferSolverBase.h
- **å†…å®¹**:
  - `BoundaryType` æšä¸¾ (5ç§è¾¹ç•Œæ¡ä»¶)
  - `BoundaryCondition` ç»“æ„ä½“
  - `MaterialProperty` ç±» (åˆ†æ®µçº¿æ€§æ’å€¼)
  - `TemperatureMeasurement` ç±» (æµ‹é‡æ•°æ®ç®¡ç†)
  - `heatTransferSolver` åŸºç±»
  - `heatTransferSolverAD` è‡ªåŠ¨å¾®åˆ†åŸºç±»

#### singleLayerSolver.h
- **å†…å®¹**:
  - `singleLayerSolver1D` ç±» (ä¸€ç»´éç¨³æ€å¯¼çƒ­æ±‚è§£)
  - `singleLayerSolver1DAD` ç±» (è‡ªåŠ¨å¾®åˆ†ç‰ˆæœ¬)
  - TDMAç®—æ³•å®ç°
  - è¾¹ç•Œæ¡ä»¶å¤„ç†
  - æ­£æ¼”æ¨¡å‹

#### multiLayerSolver.h
- **å†…å®¹**:
  - `multiLayerSolver1D` ç±»
  - å¤šå±‚ææ–™å¤„ç†
  - ç•Œé¢æ¡ä»¶å¤„ç†

#### inverseAlgorithm.h
- **å†…å®¹**:
  - `ObjectiveFunction` æ¥å£
  - `ThermalPropertyObjective` ç›®æ ‡å‡½æ•°
  - `InversionAlgorithm` åŸºç±»
  - `GeneticAlgorithm` é—ä¼ ç®—æ³•
  - `ParticleSwarmOptimization` ç²’å­ç¾¤ä¼˜åŒ–
  - `CMAES` åæ–¹å·®çŸ©é˜µé€‚åº”è¿›åŒ–ç­–ç•¥
  - `CeresInversionAlgorithm` Ceresä¼˜åŒ–
  - `InversionAlgorithmFactory` å·¥å‚ç±»

### æ„å»ºç³»ç»Ÿæ–‡ä»¶

#### CMakeLists.txt
- **åŠŸèƒ½**: CMakeä¸»é…ç½®æ–‡ä»¶
- **é…ç½®**:
  - C++17æ ‡å‡†
  - ä¾èµ–åº“æŸ¥æ‰¾ (Eigen3, Ceres)
  - ä¸‰ä¸ªå¯æ‰§è¡Œç¨‹åºç›®æ ‡
  - ç¼–è¯‘é€‰é¡¹

#### build.sh
- **åŠŸèƒ½**: è‡ªåŠ¨åŒ–æ„å»ºè„šæœ¬
- **ç‰¹ç‚¹**:
  - è‡ªåŠ¨æ£€æŸ¥ä¾èµ–
  - å½©è‰²è¾“å‡º
  - é”™è¯¯å¤„ç†
  - æ˜¾ç¤ºç¼–è¯‘ç»“æœ

#### cmake_config.sh
- **åŠŸèƒ½**: é«˜çº§é…ç½®è„šæœ¬
- **é€‰é¡¹**:
  - `-d` Debugæ„å»º
  - `-j N` å¹¶è¡Œä»»åŠ¡æ•°
  - `--clean` æ¸…ç†æ„å»º
  - `--verbose` è¯¦ç»†è¾“å‡º

#### check_dependencies.sh
- **åŠŸèƒ½**: éªŒè¯æ‰€æœ‰ä¾èµ–
- **æ£€æŸ¥**:
  - CMake
  - GCCç¼–è¯‘å™¨
  - Makeå·¥å…·
  - Eigen3åº“
  - Ceresåº“

### æ–‡æ¡£æ–‡ä»¶

#### README.md
- é¡¹ç›®æ¦‚è¿°
- ç³»ç»Ÿè¦æ±‚
- å®‰è£…æ­¥éª¤
- æ•…éšœæ’é™¤
- é¡¹ç›®ç»“æ„

#### QUICKSTART.md
- 5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹
- å¸¸ç”¨å‘½ä»¤
- ç¯å¢ƒå˜é‡è®¾ç½®
- éªŒè¯å®‰è£…

#### INSTALL.md
- è¯¦ç»†å®‰è£…æŒ‡å—
- MSYS2å®‰è£…æ­¥éª¤
- ä¾èµ–å®‰è£…æ–¹æ³•
- å¸¸è§é—®é¢˜è§£å†³

#### BUILD_SUMMARY.md
- æ„å»ºç³»ç»Ÿæ€»ç»“
- å„æ–‡ä»¶ç”¨é€”
- å¿«é€Ÿå¼€å§‹æ–¹æ³•
- ç¼–è¯‘é€‰é¡¹è¯´æ˜

## ç¼–è¯‘æµç¨‹

```
æºä»£ç  (.cpp, .h)
    â†“
CMakeLists.txt (é…ç½®)
    â†“
CMake (ç”ŸæˆMakefile)
    â†“
Make/Ninja (ç¼–è¯‘)
    â†“
å¯æ‰§è¡Œç¨‹åº
```

## ä¾èµ–å…³ç³»

```
singleLayerInverse.cpp
    â”œâ”€â”€ singleLayerSolver.h
    â”‚   â”œâ”€â”€ heatTransferSolverBase.h
    â”‚   â””â”€â”€ Eigen3
    â”œâ”€â”€ inverseAlgorithm.h
    â”‚   â”œâ”€â”€ Eigen3
    â”‚   â””â”€â”€ Ceres
    â””â”€â”€ iostream, vector, string

multiLayerInverse.cpp
    â”œâ”€â”€ multiLayerSolver.h
    â”œâ”€â”€ inverseAlgorithm.h
    â””â”€â”€ (åŒä¸Š)

dataGen.cpp
    â”œâ”€â”€ singleLayerSolver.h
    â””â”€â”€ (åŒä¸Š)
```

## ç¼–è¯‘è¾“å‡º

### å¯æ‰§è¡Œç¨‹åº

| ç¨‹åº | æºæ–‡ä»¶ | åŠŸèƒ½ |
|------|--------|------|
| singleLayerInverse | singleLayerInverse.cpp | å•å±‚åæ¼” |
| multiLayerInverse | multiLayerInverse.cpp | å¤šå±‚åæ¼” |
| dataGen | dataGen.cpp | æ•°æ®ç”Ÿæˆ |

### åº“æ–‡ä»¶

- é™æ€åº“ (å¦‚æœéœ€è¦)
- åŠ¨æ€åº“ (å¦‚æœéœ€è¦)

## ä»£ç ç»Ÿè®¡

| æ–‡ä»¶ | è¡Œæ•° | ç±»å‹ |
|------|------|------|
| singleLayerSolver.h | ~800 | å¤´æ–‡ä»¶ |
| inverseAlgorithm.h | ~1500 | å¤´æ–‡ä»¶ |
| heatTransferSolverBase.h | ~400 | å¤´æ–‡ä»¶ |
| singleLayerInverse.cpp | ~200 | æºæ–‡ä»¶ |
| multiLayerInverse.cpp | ~200 | æºæ–‡ä»¶ |
| dataGen.cpp | ~100 | æºæ–‡ä»¶ |

## å…³é”®ç±»å’Œå‡½æ•°

### ä¸»è¦ç±»

- `singleLayerSolver1D` - ä¸€ç»´éç¨³æ€å¯¼çƒ­æ±‚è§£
- `GeneticAlgorithm` - é—ä¼ ç®—æ³•ä¼˜åŒ–
- `ParticleSwarmOptimization` - ç²’å­ç¾¤ä¼˜åŒ–
- `CMAES` - CMA-ESç®—æ³•
- `ThermalPropertyObjective` - åæ¼”ç›®æ ‡å‡½æ•°

### å…³é”®ç®—æ³•

- TDMA (ä¸‰å¯¹è§’çŸ©é˜µç®—æ³•)
- æœ‰é™å·®åˆ†æ³• (FDM)
- é—ä¼ ç®—æ³• (GA)
- ç²’å­ç¾¤ä¼˜åŒ– (PSO)
- CMA-ES
- Levenberg-Marquardt (é€šè¿‡Ceres)

## ä½¿ç”¨æµç¨‹

```
1. å‡†å¤‡è¾“å…¥æ•°æ®
   â”œâ”€â”€ æ ·ä»¶å‡ ä½•å‚æ•° (é•¿åº¦, ç½‘æ ¼æ•°)
   â”œâ”€â”€ è¾¹ç•Œæ¡ä»¶ (æ¸©åº¦/çƒ­æµ/å¯¹æµ/è¾å°„)
   â”œâ”€â”€ ææ–™å‚æ•° (å¯†åº¦, åˆå§‹çƒ­å¯¼ç‡, åˆå§‹æ¯”çƒ­)
   â””â”€â”€ æ¸©åº¦æµ‹é‡æ•°æ®

2. è¿è¡Œåæ¼”ç¨‹åº
   â”œâ”€â”€ é€‰æ‹©åæ¼”ç®—æ³•
   â”œâ”€â”€ é…ç½®ç®—æ³•å‚æ•°
   â””â”€â”€ æ‰§è¡Œä¼˜åŒ–

3. è·å–ç»“æœ
   â”œâ”€â”€ æœ€ä¼˜å‚æ•°
   â”œâ”€â”€ ç›®æ ‡å‡½æ•°å€¼
   â”œâ”€â”€ æ”¶æ•›å†å²
   â””â”€â”€ éªŒè¯ç»“æœ
```

## æ‰©å±•ç‚¹

### å¯ä»¥æ·»åŠ çš„åŠŸèƒ½

1. **æ–°çš„è¾¹ç•Œæ¡ä»¶** - åœ¨ `BoundaryType` ä¸­æ·»åŠ 
2. **æ–°çš„ä¼˜åŒ–ç®—æ³•** - ç»§æ‰¿ `InversionAlgorithm`
3. **å¤šç»´é—®é¢˜** - æ‰©å±•æ±‚è§£å™¨ç»´åº¦
4. **å¹¶è¡Œè®¡ç®—** - ä½¿ç”¨OpenMPæˆ–MPI
5. **å¯è§†åŒ–** - é›†æˆç»˜å›¾åº“
6. **æ•°æ®I/O** - æ”¯æŒæ›´å¤šæ–‡ä»¶æ ¼å¼

## æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨Eigen3çš„å‘é‡åŒ–æ“ä½œ
- å¹¶è¡Œç¼–è¯‘ (`make -j`)
- Releaseæ„å»ºä¼˜åŒ– (`-O3 -march=native`)
- è‡ªåŠ¨å¾®åˆ†åŠ é€Ÿ (Ceres)

## è°ƒè¯•

- Debugæ„å»º: `./cmake_config.sh -d`
- GDBè°ƒè¯•: `gdb ./build/bin/singleLayerInverse`
- è¯¦ç»†è¾“å‡º: `./cmake_config.sh --verbose`

## ä¸‹ä¸€æ­¥

1. æŸ¥çœ‹ `QUICKSTART.md` å¿«é€Ÿå¼€å§‹
2. è¿è¡Œ `./build.sh` æ„å»ºé¡¹ç›®
3. æŸ¥çœ‹æºä»£ç äº†è§£å®ç°ç»†èŠ‚
4. æ ¹æ®éœ€è¦ä¿®æ”¹å’Œæ‰©å±•
